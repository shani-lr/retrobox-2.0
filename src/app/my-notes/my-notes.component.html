<div class="my-notes">
  <div *ngIf="(authService.authState | async) as user; else showLogin">
    <div class="row" *ngIf="!isNewUser; else showNewUser">
      <div class="col-md-auto note">
        <div class="card">
          <div class="card-body">
            <textarea type="text" class="card-title" placeholder="Add new note here..."
                      [(ngModel)]="newNote"></textarea>
            <div class="save" (click)="onSave()"><i class="fas fa-check-circle"></i></div>
            <div class="cancel" (click)="onCancel()"><i class="fas fa-times-circle"></i></div>
          </div>
        </div>
      </div>
      <div class="col-md-auto note" *ngFor="let note of myNotes">
        <div class="card">
          <div class="card-body">
            <h6 class="card-title">{{note.text}}</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #showNewUser>
    <div class="container" style="margin-top: 2em;">
      <div class="row">
        <div class="col">
          <div class="alert alert-info" role="alert" style="margin-bottom: 0">
            <i class="fas fa-info-circle"></i> Seems like you don't have a team ðŸ˜¢ Join one!
          </div>
        </div>
      </div>
      <div class="row" style="margin-top: 1em">
        <div class="col-md-auto d-inline-block" style="padding-right: 0">
          <div style="padding: 5% 0" class="d-inline-block">Join an existing team:</div>
        </div>
        <div class="col-md-auto d-inline-block" style="margin-bottom: 1em">
          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-info" id="dropdownBasic1" ngbDropdownToggle
                    style="border-radius: 3px; width: 12em">
              {{ team ? team : 'No team selected'}}
            </button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic1"
                 style="min-width: 0; border-radius: 0; border-color: #bee5eb; width: 15em">
              <button *ngFor="let t of teams" class="dropdown-item" (click)="team = t.name">{{t.name}}</button>
            </div>
          </div>
        </div>
        <div class="col-md-auto" *ngIf="team">
          <button class="btn btn-info" (click)="onJoinTeam()">Join! <i class="fas fa-hand-point-right"></i></button>
        </div>
        <div class="col-md-auto d-inline-block" *ngIf="!createTeam; else showCreateTeam">
          <button class="btn btn-link" (click)="createTeam = true" style="padding: 5% 0;">Can't find your team?
          </button>
        </div>
      </div>
    </div>
    <ng-template #showCreateTeam>
      <div *ngIf="createTeam">
        <div class="col-md-auto d-inline-block" style="margin-top: 1em">
          <div class="div d-inline-block" style="padding-right: 1em">Create a new one:</div>
          <input type="text" class="form-control d-inline-block team-input"
                 style="border-radius: 3px; border-color: #17a2b8; color: #17a2b8; outline: none; width: 15em; margin-bottom: 1em"
                 placeholder="Team name" [(ngModel)]="teamToCreate.name">
          <input type="text" class="form-control d-inline-block team-input"
                 style="border-radius: 3px; border-color: #17a2b8; color: #17a2b8; outline: none; width: 15em; margin-bottom: 1em"
                 placeholder="Team admin" [(ngModel)]="teamToCreate.admin">
          <input type="text" class="form-control d-inline-block team-input"
                 style="border-radius: 3px; border-color: #17a2b8; color: #17a2b8; outline: none; width: 15em; margin-bottom: 1em"
                 placeholder="Team sprint number" [(ngModel)]="teamToCreate.sprint">
          <button class="btn btn-info" (click)="onCreateTeam()"><i class="fas fa-users"></i> Create</button>
        </div>
      </div>
    </ng-template>
  </ng-template>
  <ng-template #showLogin>
    <div class="container" style="margin-top: 2em;">
      <div class="row">
        <div class="col">
          <div class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-circle"></i> You need to be logged in to view your notes.
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>
